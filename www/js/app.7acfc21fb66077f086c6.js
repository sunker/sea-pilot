webpackJsonp([1],{160:function(t,e,o){function n(t){o(413)}var a=o(55)(o(168),o(432),n,"data-v-516e1bbf",null);t.exports=a.exports},161:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(110),a=o(56),r=o(438),i=o.n(r),s=o(411),c=(o.n(s),o(425)),d=o.n(c),l=o(426),u=o.n(l),v=o(427),p=o.n(v),f=o(164);if(n.a.use(a.a),n.a.use(i.a),n.a.config.productionTip=!1,n.a.use(d.a),n.a.use(u.a),"file:"===window.location.protocol||"3000"===window.location.port){var m=document.createElement("script");m.setAttribute("type","text/javascript"),m.setAttribute("src","cordova.js"),document.body.appendChild(m)}new n.a({el:"#app",router:f.a,template:"<App/>",components:{App:p.a},store:o(166).default,head:{meta:[{name:"viewport",content:"width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}]}})},163:function(t,e,o){"use strict";var n=o(176),a=o.n(n),r=o(177),i=o.n(r),s=void 0,c=void 0,d=void 0,l=void 0,u=[],v=!1,p=!0,f=function(){function t(e){a()(this,t);try{s&&(eniro.maps.event.clearListeners(s,"click"),eniro.maps.event.clearListeners(s,"zoom_changed")),s=new eniro.maps.Map(e,{zoom:10,mapTypeId:eniro.maps.MapTypeId.NAUTICAL,mapTypeControl:!1,zoomControl:!1,focus:!0});var o={lat:59.334591,lng:18.06324};return s.panTo(new eniro.maps.LatLng(o.lat,o.lng)),v?d=new eniro.maps.Polyline({map:s,path:l}):c=new eniro.maps.Marker({map:s,position:new eniro.maps.LatLng(0,0)}),!0}catch(t){return!1}}return i()(t,[{key:"setPositionMarker",value:function(t,e){v?l.push(new eniro.maps.LatLng(t,e)):c.setPosition(new eniro.maps.LatLng(t,e)),p&&s.panTo(new eniro.maps.LatLng(t,e))}},{key:"panTo",value:function(t,e){s.panTo(new eniro.maps.LatLng(t,e))}},{key:"zoomIn",value:function(){var t=s.getZoom();s.setZoom(--t)}},{key:"zoomOut",value:function(){var t=s.getZoom();s.setZoom(++t)}},{key:"stopJourney",value:function(){v=!1,c&&(c.setVisible(!0),c.setMap(s)),d&&d.setMap(null),l&&(l=[]),u.forEach(function(t){t.setVisible(!1)}),u=[]}},{key:"startNewJourney",value:function(){v=!0,c.setVisible(!1),l=new eniro.maps.MapArray,d=new eniro.maps.Polyline({map:s,path:l})}},{key:"loadJourney",value:function(t,e){v=!0,c.setVisible(!1),s.setZoom(e),l=new eniro.maps.MapArray;for(var o=0;o<t.length;o++){var n=t[o],a=n.lat,r=n.lng;n.isMob&&this.addRedMarker({lat:a,lng:r}),l.push(new eniro.maps.LatLng(a,r))}d=new eniro.maps.Polyline({map:s,path:l})}},{key:"setAutoFocus",value:function(t){p=t,console.log("Autofocus: "+t)}},{key:"addRedMarker",value:function(t){var e=new eniro.maps.Marker({map:s,position:new eniro.maps.LatLng(0,0),icon:new eniro.maps.MarkerImage("../../images/MOB.png",new eniro.maps.Size(24,24),new eniro.maps.Point(0,0),new eniro.maps.Point(11,13),0,0)});e.setPosition(new eniro.maps.LatLng(t.lat,t.lng)),u.push(e)}},{key:"onClick",value:function(t){eniro.maps.event.addListener(s,"click",t)}},{key:"onZoomChange",value:function(t){eniro.maps.event.addListener(s,"zoom_changed",function(){t({zoomLevel:s.getZoom()})})}}]),t}();e.a=f},164:function(t,e,o){"use strict";var n=o(110),a=o(436),r=o(430),i=o.n(r),s=o(429),c=o.n(s);n.a.use(a.a),e.a=new a.a({routes:[{path:"/",name:"Dashboard",component:i.a},{path:"/chart",name:"chart",component:c.a}]})},165:function(t,e,o){"use strict";var n=o(417);o.n(n);e.a={currentCoordinate:function(t){return t.coordinates[0]},bearing:function(t){return t.coordinates.length<2?0:o.i(n.getBearing)({latitude:t.coordinates[1].lat,longitude:t.coordinates[1].lng},{latitude:t.coordinates[0].lat,longitude:t.coordinates[0].lng})},compassDirection:function(t,e){var o=e.bearing;return["N","NNÖ","NÖ","ÖNÖ","Ö","ÖSÖ","SÖ","SSÖ","S","SSV","SV","VSV","V","VNV","NV","NNV"][Math.floor(o/22.5+.5)%16]},speed:function(t){return t.coordinates.length<2?0:o.i(n.getSpeed)(t.coordinates[1],t.coordinates[0])},averageGpsdSpeed:function(t,e){return 1===t.coordinates.length?0:(t.coordinates.map(function(t){return t.speed}).reduce(function(t,e){return t+=e})/t.coordinates.length).toFixed(2)},averageSpeed:function(t,e){if(1===t.coordinates.length)return 0;for(var a=0,r=e.currentCoordinate,i=1;i<t.coordinates.length;i++){a+=o.i(n.getSpeed)(t.coordinates[i],r),r=t.coordinates[i]}return(a/t.coordinates.length).toFixed(2)}}},166:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(111),a=o.n(n),r=o(56),i=o(165);e.default=new r.a.Store({state:{journey:{ongoing:!1,zoomLevel:10},coordinates:[{lat:59.334591,lng:18.06324,time:"",speed:0,isMob:!1,defaultCoord:!0}]},getters:i.a,mutations:{setCoordinates:function(t,e){var o=e.lat,n=e.lng,r=e.time,i=e.speed;if(1===t.coordinates.length&&!0===t.coordinates[0].defaultCoord&&t.coordinates.shift(),t.coordinates.unshift({lat:o,lng:n,time:r,speed:i||3}),t.journeyMode){var s=JSON.parse(localStorage.getItem("journey"));s.push({lat:o,lng:n,time:r,speed:i}),localStorage.setItem("journey",a()(s))}else t.coordinates.length>=1e4&&t.coordinates.pop()},loadJourney:function(t,e){t.coordinates=e,t.journey.ongoing=!0},createJourney:function(t,e){localStorage.setItem("journey",a()([e])),t.coordinates=[e],t.journey.ongoing=!0},endJourney:function(t,e){localStorage.removeItem("journey"),t.coordinates=[e],t.journey.ongoing=!1}}})},167:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(178),a=o.n(n),r=o(111),i=o.n(r),s=o(110),c=o(421);o.n(c);e.default={data:function(){return{cordova:s.a.cordova,counter:0}},mounted:function(){},created:function(){var t=this;this.cordova.on("deviceready",function(){console.log("deviceready"),t.onDeviceReady()})},methods:{onDeviceReady:function(){function t(t){console.log("Found "+i()(t)),ble.connect(t.id,function(t){console.log("Connected to "+t.id),console.log(t),ble.startNotification(t.id,t.services[0],"00010001-9FAB-43C8-9231-40F6E305F96E",function(t){var e=new c.TextDecoder("utf-8").decode(t),n=e.split(";"),r=a()(n,4),i=r[0],s=r[1],d=r[2],l=r[3],u={lng:Number(i),lat:Number(s),time:Number(d),speed:Number(l)};o.$store.commit("setCoordinates",u)},function(t){console.log("Failed to read characteristic from device.",t)})})}function e(t){console.log("BLE Scan Failed",t)}var o=this;this.cordova.on("pause",this.onPause,!1),this.cordova.on("resume",this.onResume,!1),"Android"===this.cordova.device.platform&&document.addEventListener("backbutton",this.onBackKeyDown,!1),console.log("Deviceready"),console.log("Scan"),ble.scan(["00010000-9FAB-43C8-9231-40F6E305F96D"],20,t,e)},onPause:function(){console.log("pause")},onResume:function(){setTimeout(function(){console.log("resume")},0)},onBackKeyDown:function(){navigator.app.exitApp()}}}},168:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(75),a=o.n(n),r=o(163),i=o(56);e.default={mounted:function(){var t=this;this.chart=new r.a(document.querySelector(".chart-map")),this.initialized=!0,this.chart.onClick(function(e){return t.chart.setAutoFocus(!1)})},props:["displayZoom","height"],computed:a()({},o.i(i.c)(["currentCoordinate"]),o.i(i.b)(["journey","coordinates"])),data:function(){return{initialized:!1}},methods:{panToCenter:function(t){t.stopPropagation(),this.chart.panTo(this.currentCoordinate.lat,this.currentCoordinate.lng),this.chart.setAutoFocus(!0)},zoomIn:function(t){t.stopPropagation(),this.chart.zoomIn()},zoomOut:function(t){t.stopPropagation(),this.chart.zoomOut()}},watch:{"currentCoordinate.lat":function(t){this.chart.setPositionMarker(this.currentCoordinate.lat,this.currentCoordinate.lng)},"currentCoordinate.lng":function(t){this.chart.setPositionMarker(this.currentCoordinate.lat,this.currentCoordinate.lng)},"journey.ongoing":function(t){t?this.chart.loadJourney(this.coordinates,this.journey.zoomLevel):this.chart.stopJourney()}}}},169:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(75),a=o.n(n),r=o(56);e.default={computed:a()({},o.i(r.b)(["journey"]),o.i(r.c)(["currentCoordinate","bearing","compassDirection","speed","averageSpeed","averageGpsdSpeed"])),methods:{formatPosition:function(t){var e=t.toFixed(5).toString().replace(".","°");return e.substr(0,5)+"."+e.substr(5)}}}},170:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(75),a=o.n(n),r=o(160),i=o.n(r),s=o(428),c=o.n(s),d=o(56);e.default={created:function(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.mapHeight=.8*t,this.footerHeight=.2*t},computed:a()({},o.i(d.b)(["journey"]),o.i(d.c)(["currentCoordinate","bearing","compassDirection","speed","averageGpsdSpeed"])),data:function(){return{dialog:!1}},methods:a()({},o.i(d.d)(["createJourney","endJourney"]),{formatPosition:function(t){var e=t.toFixed(5).toString().replace(".","°");return e.substr(0,5)+"."+e.substr(5)}}),components:{Chart:i.a,ChartStatsBoard:c.a}}},171:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(160),a=o.n(n);e.default={mounted:function(){},data:function(){return{cards:[{title:"Pre-fab homes",src:"/static/doc-images/cards/house.jpg",flex:12},{title:"Favorite road trips",src:"/static/doc-images/cards/road.jpg",flex:6},{title:"Best airlines",src:"/static/doc-images/cards/plane.jpg",flex:6}]}},methods:{navigate:function(t){this.$router.push(t)}},components:{Chart:a.a}}},411:function(t,e){},412:function(t,e){},413:function(t,e){},414:function(t,e){},415:function(t,e){},416:function(t,e){},427:function(t,e,o){function n(t){o(416)}var a=o(55)(o(167),o(435),n,null,null);t.exports=a.exports},428:function(t,e,o){function n(t){o(414)}var a=o(55)(o(169),o(433),n,"data-v-5ccde5b4",null);t.exports=a.exports},429:function(t,e,o){function n(t){o(412)}var a=o(55)(o(170),o(431),n,"data-v-3a9e16f8",null);t.exports=a.exports},430:function(t,e,o){function n(t){o(415)}var a=o(55)(o(171),o(434),n,"data-v-a2a4d216",null);t.exports=a.exports},431:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{column:""}},[o("v-btn",{staticClass:"expand-info",style:{top:t.mapHeight-15+"px"},attrs:{fab:"",dark:"",small:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[o("v-icon",{attrs:{dark:""}},[t._v("add")])],1),t._v(" "),o("chart",{attrs:{"display-zoom":!0,height:t.mapHeight}}),t._v(" "),o("v-footer",{staticStyle:{"border-top":"1px solid gray"},style:{height:t.footerHeight+"px"},attrs:{height:""}},[o("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[o("v-layout",{staticClass:"table-journey",attrs:{row:"",wrap:"","justify-center":""}},[o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KNOP")]),t._v(" "),o("dd",[t._v(t._s(t.currentCoordinate.speed))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KNOP (MEDEL)")]),t._v(" "),o("dd",[t._v(t._s(t.averageGpsdSpeed))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("Bäring")]),t._v(" "),o("dd",[t._v(t._s(t.bearing.toFixed(0)+"°"))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KOMPASSRIKTNING")]),t._v(" "),o("dd",{staticClass:"dd-small"},[t._v(t._s(t.compassDirection))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("LATITUD")]),t._v(" "),o("dd",{staticClass:"dd-small"},[t._v(t._s(t.formatPosition(this.currentCoordinate.lat)+"N"))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("LONGITUD")]),t._v(" "),o("dd",{staticClass:"dd-small"},[t._v(t._s(t.formatPosition(this.currentCoordinate.lng)+"E"))])])])],1)],1)],1),t._v(" "),o("v-dialog",{staticClass:"extra-info-dialog",attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1,scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",{attrs:{tile:""}},[o("v-toolbar",{attrs:{card:"",dark:"",color:"secondary"}},[o("v-btn",{staticClass:"dialog-button-close",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v("close")])],1)],1),t._v(" "),o("v-card-text",{staticClass:"chart-button-row"},[o("v-btn",{attrs:{slot:"activator",large:"",disabled:!t.journey.ongoing},on:{click:function(e){t.endJourney(t.currentCoordinate)}},slot:"activator"},[t._v("Avsluta tripp")]),t._v(" "),o("v-btn",{attrs:{large:"",disabled:t.journey.ongoing,color:"secondary"},on:{click:function(e){t.createJourney(t.currentCoordinate)}}},[t._v("Starta tripp")])],1),t._v(" "),o("chart-stats-board")],1)],1)],1)},staticRenderFns:[]}},432:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"chart-map",style:{height:t.height+"px"}},[null===t.initialized?o("div",{staticClass:"loading-feedback"},[o("p",{staticClass:"text-center temp"},[t._v("Laddar sjökort...")])]):t._e(),t._v(" "),!1===t.initialized?o("div",{staticClass:"loading-feedback"},[o("p",{staticClass:"text-center temp"},[t._v("Kan inte ansluta till Eniro")])]):t._e(),t._v(" "),t.displayZoom?o("div",[o("div",{staticClass:" pull-right"},[o("div",{staticClass:"btn-group-vertical"},[o("div",{staticClass:"chart-center-buttons"},[o("v-btn",{attrs:{outline:"",fab:"",dark:"",large:"",color:"black"},on:{click:function(e){t.panToCenter(e)}}},[o("v-icon",{attrs:{dark:""}},[t._v("my_location")])],1)],1)]),t._v(" "),o("v-flex",{staticClass:"chart-zoom-buttons",attrs:{xs12:"",sm6:""}},[o("div",{staticClass:"text-xs-center"},[o("div",[o("v-btn",{attrs:{color:"black",large:"",dark:"",outline:""},on:{click:function(e){t.zoomOut(e)}}},[o("v-icon",[t._v("add")])],1)],1),t._v(" "),o("div",[o("v-btn",{attrs:{color:"black",large:"",dark:"",outline:""},on:{click:function(e){t.zoomIn(e)}}},[o("v-icon",[t._v("remove")])],1)],1)])])],1)]):t._e()])},staticRenderFns:[]}},433:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{staticClass:"table-journey",attrs:{row:"",wrap:"","justify-center":""}},[o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KNOP(GPSD)")]),t._v(" "),o("dd",[t._v(t._s(t.currentCoordinate.speed))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("MEDELKNOP (GPSD)")]),t._v(" "),o("dd",[t._v(t._s(t.averageGpsdSpeed))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("Bäring")]),t._v(" "),o("dd",[t._v(t._s(t.bearing.toFixed(0)+"°"))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KNOP")]),t._v(" "),o("dd",[t._v(t._s(t.speed))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("MEDELKNOP")]),t._v(" "),o("dd",[t._v(t._s(t.averageSpeed))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KMH (GPSD)")]),t._v(" "),o("dd",[t._v(t._s((1.852*t.currentCoordinate.speed).toFixed(2)))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("KOMPASSRIKTNING")]),t._v(" "),o("dd",[t._v(t._s(t.compassDirection))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("LATITUD")]),t._v(" "),o("dd",[t._v(t._s(t.formatPosition(this.currentCoordinate.lat)+"N"))])])]),t._v(" "),o("v-flex",{attrs:{xs4:""}},[o("dl",[o("dt",[t._v("LONGITUD")]),t._v(" "),o("dd",[t._v(t._s(t.formatPosition(this.currentCoordinate.lng)+"E"))])])])],1)},staticRenderFns:[]}},434:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{column:""}},[o("v-card",[o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs6:""}},[o("v-card",[o("v-card-media",{attrs:{height:"200px"}},[o("v-container",{attrs:{"fill-height":"",fluid:""}})],1)],1)],1),t._v(" "),o("v-flex",{attrs:{xs6:""}},[o("v-card",[o("v-card-media",{attrs:{height:"200px"}},[o("v-container",{attrs:{"fill-height":"",fluid:""}})],1)],1)],1),t._v(" "),o("v-flex",{attrs:{xs12:""},on:{click:function(e){t.navigate("chart")}}},[o("v-card",[o("v-card-media",{attrs:{height:"200px"}},[o("v-container",{attrs:{"fill-height":"",fluid:""}},[o("chart",{attrs:{"display-zoom":!1}})],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]}},435:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",{attrs:{light:""}},[o("v-content",[o("router-view")],1)],1)},staticRenderFns:[]}},439:function(t,e,o){o(162),t.exports=o(161)}},[439]);
//# sourceMappingURL=app.7acfc21fb66077f086c6.js.map